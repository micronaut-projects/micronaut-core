apply plugin: "com.github.johnrengelman.shadow"

dependencies {
    compile project(":router")
    compile project(":runtime")
    compileOnly project(":inject-java")

    testCompile project(":http-client")
    testCompile project(":inject-groovy")
    testCompile project(":http-server-netty")
    testCompile dependencyModuleVersion("micronaut.sql", "micronaut-jdbc-tomcat")
    testCompile dependencyModuleVersion("groovy", "groovy-json")
    testCompile dependencyVersion("h2")
    testCompile "mysql:mysql-connector-java:6.0.6"

    compileOnly "ch.qos.logback:logback-classic:1.2.3"
}

shadowJar {
    relocate "com.github.benmanes.caffeine", "io.micronaut.caffeine"
}
tasks.withType(com.github.jengelman.gradle.plugins.shadow.tasks.ConfigureShadowRelocation) { t ->
    t.enabled = false
}

//compileTestGroovy.groovyOptions.forkOptions.jvmArgs = ['-Xdebug', '-Xrunjdwp:transport=dt_socket,server=y,suspend=y,address=5005']
