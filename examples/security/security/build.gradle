plugins {
    id 'com.github.johnrengelman.shadow' version '2.0.1'
    id 'groovy'
    id "application"
}
mainClassName = "example.security.SecurityApplication"
ext {
    pac4jVersion = '2.3.1'
    gormVersion = '6.1.9.RELEASE'
    mysqlVersion = '5.1.46'
    h2Version = '1.4.196'
}
jar {
    manifest {
        attributes 'Main-Class': "example.security.SecurityApplication"
    }
}
repositories {
    mavenLocal()
    mavenCentral()
}
dependencies {
    compileOnly "io.micronaut:inject-groovy:${projectVersion}"
    compile "io.micronaut.configuration:hibernate-validator:${projectVersion}"
    compile "io.micronaut.configuration:hibernate-gorm:${projectVersion}"
    compile "io.micronaut:runtime-groovy:${projectVersion}"

    compile "org.grails:grails-datastore-gorm-hibernate5:$gormVersion"

    runtime "com.h2database:h2:$h2Version"
    runtime "org.apache.tomcat:tomcat-jdbc:8.5.28"

    compile "io.micronaut:http-server-netty:${projectVersion}"
    compile "io.micronaut:security:${projectVersion}"
    compile "io.micronaut:security-passwordencoder:${projectVersion}"
    compile "io.micronaut:management:${projectVersion}"
    compile "io.micronaut.configuration:hibernate-validator:${projectVersion}"
    compile 'javax.annotation:javax.annotation-api:1.3.2'

    runtime 'org.yaml:snakeyaml:1.19'
    runtime "ch.qos.logback:logback-classic:1.2.3"
    compile "io.micronaut:discovery-client:${projectVersion}"

    testCompile "io.micronaut:inject-java:${projectVersion}"
    testCompile "io.micronaut:http-client:${projectVersion}"

    testCompile('org.codehaus.groovy:groovy-all:2.4.15')
    testCompile("org.spockframework:spock-core:1.1-groovy-2.4") {
        exclude module:'groovy-all'
    }

    compile "org.pac4j:pac4j-ldap:${pac4jVersion}"
}
shadowJar {
    mergeServiceFiles()
}