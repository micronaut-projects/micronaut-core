/**
 * This plugin applies dependency substitutions so that modules
 * which are built locally are preferred over their binary versions.
 */

configurations.all {
    resolutionStrategy.dependencySubstitution {
        rootProject.subprojects.each {
            if (!it.name.startsWith('test-')) {
                if (it.name.contains('bom')) {
                    substitute platform(module("io.micronaut:micronaut-${it.name}")) using platform(project(":${it.name}")) because "we want to test with what we're building"
                } else {
                    substitute module("io.micronaut:micronaut-${it.name}") using project(":${it.name}") because "we want to test with what we're building"
                }
            }
        }
    }
}
